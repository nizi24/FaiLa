.comment-item-wrapper
  - @comments.each do |comment|

    .comment-item
      .comment-item-header
        .comment-item-header-left
          - if comment.user.icon.attached?
            = image_tag comment.user.icon, size: '50x50', class: 'user-icon mobile-none'
            = image_tag comment.user.icon, size: '30x30', class: 'user-icon mobile-only'
          - else
            = image_tag 'default_icon.jpeg', size: '50x50', class: 'user-icon mobile-none'
            = image_tag 'default_icon.jpeg', size: '30x30', class: 'user-icon mobile-only'

            =link_to comment.user.name, comment.user, class: 'comment-user-name'

        -if current_user == comment.user
          =button_to '削除', comment, method: :delete,
            data: { confirm: '本当に削除しますか？' },
            class: 'h6 destroy-comment'

      .comment-item-body
        %p.comment-content=comment.content

      .comment-item-footer
        %span.timestamp #{ time_ago_in_words(comment.created_at)}前

        .comment-likes
          - if logged_in? && current_user.already_liked?(comment)
            = button_to @comment_like, method: :delete,
                                       params: { likeable_type: 'Comment',
                                                 likeable_id: comment.id } ,
                                       class: 'like-icon comment-like' do
              %i.fas.fa-heart.fa-lg
            %span.likes_total= comment.likes_total

          - else
            = button_to comment.likes.build, params: { likeable_type: 'Comment',
                                                       likeable_id: comment.id } ,
                                             class: 'like-icon comment-like' do
              %i.far.fa-heart.fa-lg
            %span.likes_total= comment.likes_total - 1
